<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="icon" href="/favicon.ico"/><link rel="apple-touch-icon" sizes="72x72" href="/android-icon-72x72.png"/><meta name="description" content="Kittinan"/><meta name="og:title" content="Kittinan"/><meta name="twitter:card" content="summary_large_image"/><title>วิธีการอัพโหลด PHP Package ขึ้น Packagist</title><meta name="next-head-count" content="8"/><link rel="preload" href="/_next/static/css/d956bfbeac7a7df3d68f.css" as="style"/><link rel="stylesheet" href="/_next/static/css/d956bfbeac7a7df3d68f.css" data-n-g=""/><link rel="preload" href="/_next/static/css/87a1eaf01853212888db.css" as="style"/><link rel="stylesheet" href="/_next/static/css/87a1eaf01853212888db.css" data-n-p=""/><link rel="preload" href="/_next/static/css/9c58affd6331c6fae7ab.css" as="style"/><link rel="stylesheet" href="/_next/static/css/9c58affd6331c6fae7ab.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a54b4f32bdc1ef890ddd.js"></script><script src="/_next/static/chunks/webpack-f0439167fa7eb1e01ecd.js" defer=""></script><script src="/_next/static/chunks/framework-895f067827ebe11ffe45.js" defer=""></script><script src="/_next/static/chunks/main-b4b241c8bbabbbce519d.js" defer=""></script><script src="/_next/static/chunks/pages/_app-815c634351185d4202e0.js" defer=""></script><script src="/_next/static/chunks/687-342b3274a7353d57565b.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-edef05025b1985c9c71b.js" defer=""></script><script src="/_next/static/hTdiHLNlQlQZ-_PaVeAWX/_buildManifest.js" defer=""></script><script src="/_next/static/hTdiHLNlQlQZ-_PaVeAWX/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div><div class="layout_container__2t4v2"><header class="layout_header__2rhWq"><a href="/"><img src="/images/kittinan.png" class="utils_borderCircle__13qdJ" height="108" width="108" alt="Kittinan"/></a><h2 class="utils_headingLg__de7p0"><a class="utils_colorInherit__3Gudf" href="/">Kittinan</a></h2></header><main><article><h1 class="utils_headingXl__1XecN">วิธีการอัพโหลด PHP Package ขึ้น Packagist</h1><div class="utils_lightText__12Ckm"><time dateTime="2015-02-18 00:15:00">February 18, 2015</time></div><div><p>วันนี้มีโอกาสอัพโหลด PHP Library ที่เขียนขึ้นมาใช้งานเองเข้า Packagist เนื่องจากต้องการโหลด Library ที่เขียนขึ้นผ่าน composer จึงมาเขียน Blog แบ่งปันประสบการณ์ครับ  </p>
<p>Composer กับ Packagist คืออะไรผมจะไม่กล่าวถึงแล้วนะครับ   </p>
<p>สิ่งที่จำเป็นสำหรับการอัพโหลด PHP Library เข้า Packagist ก็คือ  </p>
<ol>
<li>composer.json  </li>
<li>Code ของเราต้องอยู่ในรูปแบบของ <a href="http://www.php-fig.org/psr/psr-4/">PSR-4</a>  </li>
<li>Github  </li>
</ol>
<p>ผมจะใช้โปรเจค <a href="https://github.com/kittinan/php-http">https://github.com/kittinan/php-http</a> เป็นตัวอย่างนะครับ ซึ่ง commit ก่อนที่เปลี่ยนรูปแบบให้เป็น PSR-4 นั้น จะอยู่ใน commit นี้ <a href="https://github.com/kittinan/php-http/tree/9a91de95c53538d081081c56ee4d77b6d9fa2171">https://github.com/kittinan/php-http/tree/9a91de95c53538d081081c56ee4d77b6d9fa2171</a> ซึ่งจะสังเกตุเห็นว่ามีอยู่แค่ 2 ไฟล์เท่านั้นคือ  </p>
<ul>
<li>http.php<br>
- README.md  </li>
</ul>
<p>โดยผมจะจัดการไฟล์ใหม่ให้มันอยู่ในรูปแบบของ PSR-4 นะครับ โดยที่ผมจะจัดวางไฟล์ใหม่ดังนี้  </p>
<p>\<NamespaceName>(\<SubNamespaceNames>)*\<ClassName>  </p>
<p>ซึ่งเมื่อจัดแล้วจะอยู่ในรูปแบบ  </p>
<p>\KS\HTTP\HTTP.php  </p>
<p>เมื่อจัดการวางไฟล์และโฟล์เดอร์ให้อยู่ในรูปแบบ PSR-4 เรียบร้อยผมก็จัดการแก้ชื่อ class จากเดิมที่เป็น http  เป็น HTTP และใส่ namespace ที่ถูกต้องเข้าไปก็คือ namespace KS\HTTP; ดูได้จากไฟล์นี้นะครับ <a href="https://github.com/kittinan/php-http/blob/master/src/KS/HTTP/HTTP.php">https://github.com/kittinan/php-http/blob/master/src/KS/HTTP/HTTP.php</a>  </p>
<p>เมื่อจัดการไฟล์และโฟล์เดอร์เรียบร้อยแล้ว ก็มาถึงคิวของ composer.json ซึ่งจะต้องสร้างไฟล์นี้ไว้ที่ root path ของ project นะครับ  </p>
<p>สร้าง composer.json ที่ root path ของ project โดยใส่รายละเอียดตามไฟล์นี้ครับ <a href="https://github.com/kittinan/php-http/blob/master/composer.json">https://github.com/kittinan/php-http/blob/master/composer.json</a>  </p>
<p>สิ่งสำคัญคือตรง autoload เราต้องกำหนดให้ถูกต้องครับ ซึ่งเราจะใช้ PSR-4  โดยที่ key ของ json ตรงนั้นจะเปน namespace ของเรา แล้ว  value ก็จะเป็น folder ครับซึ่งจะออกมาเป็นดังนี้  </p>
<blockquote>
<p>"KS\HTTP\": "src/KS/HTTP"</p>
</blockquote>
<p>เมื่อสร้างไฟล์ composer.json เรียบร้อย ให้ commit และ push ขึ้น github ครับ หลังจากนั้นเราก็เข้าไปที่เวป <a href="https://packagist.org/">https://packagist.org/</a> ให้ login  ด้วย user Github ให้เรียบร้อยก่อนนะครับ เสร็จแล้วกด submit package เราก็นำ url github project ของเรามาใส่ รอสักครู่มันก็จะไปดึงข้อมูลจาก github มาให้ กด submit เป็นเสร้จสิ้น  </p>
<p>หากเราต้องการเวลาที่ push code ใหม่ๆเข้าไปยัง Github และไป update เจ้า Packagist  เราต้องสร้าง GitHub Service Hook ไปยัง  Packagist ครับ โดยกดเข้าไปที่ GitHub Service Hook ดังภาพ  </p>
<p><a href="http://4.bp.blogspot.com/-DWpwnRMbCvQ/VONzZ6fYvkI/AAAAAAAAUos/Q-c4BtYVdV4/s1600/Screenshot-20.png"><img src="http://4.bp.blogspot.com/-DWpwnRMbCvQ/VONzZ6fYvkI/AAAAAAAAUos/Q-c4BtYVdV4/s1600/Screenshot-20.png"></a><br>
เมื่อกดเข้าไปแล้วสิ่งที่เราต้องการคือ  Your API Token กดเพื่อแสดง token ครับดังภาพ  </p>
<p><a href="http://2.bp.blogspot.com/-hTXg2a_dS3Y/VON0DcDdmtI/AAAAAAAAUo0/yJxd8fV_jH8/s1600/Screenshot-21.png"><img src="http://2.bp.blogspot.com/-hTXg2a_dS3Y/VON0DcDdmtI/AAAAAAAAUo0/yJxd8fV_jH8/s1600/Screenshot-21.png"></a>  </p>
<p>ให้เรานำ API token ไปใส่ที่ Github ครับ ซึ่งเข้าไปที่ Project ของเราแล้วกด Setting ดังภาพ  </p>
<p><a href="http://4.bp.blogspot.com/-hoisQpLYZYk/VON0tPPbHBI/AAAAAAAAUpA/4BMJ_Z5TzmU/s1600/Screenshot-22.png"><img src="http://4.bp.blogspot.com/-hoisQpLYZYk/VON0tPPbHBI/AAAAAAAAUpA/4BMJ_Z5TzmU/s1600/Screenshot-22.png"></a>  </p>
<p>เมื่อกดเข้าไปที่ Setting  แล้วให้ไปที่ Webhooks &#x26; Services >  กด Add Services เลือก Pakagist ครับ  </p>
<p>เสร็จแล้วใส่ username เราที่ใช้ใน Pakagist ถ้าในที่นี่ login Pakagist ด้วย Github<br>
username ที่ใช้ก็จะเหมือน username ของ Github ครับ ในโปรเจคนี้คือ kittinan และใส่ token ที่เราได้จาก Pakagist ดังภาพ  </p>
<p><a href="http://3.bp.blogspot.com/-ZhSKX7keJWQ/VON13AUmZbI/AAAAAAAAUpI/_5FNUzXryDg/s1600/Screenshot-23.png"><img src="http://3.bp.blogspot.com/-ZhSKX7keJWQ/VON13AUmZbI/AAAAAAAAUpI/_5FNUzXryDg/s1600/Screenshot-23.png"></a>  </p>
<p>กด Add Service เป็นอันเสร็จสิ้นครับ เมื่อเรา Push code ใหม่ๆเข้า Gihub เจ้า Gtihub ก็จะยิงไปบอก Pakagist ว่ามี code ใหม่ๆมาแล้วนะ เจ้า Pakgist ก็จะอัพเดทข้อมูลๆใหม่ครับ  </p>
<p>เดี๋ยวบทความต่อไปจะมาเล่าถึงวิธีการเชื่อต่อกับ <a href="https://travis-ci.org/">travis-ci</a> เพื่อทำ Continuous Integration นะครับ</p>
</div></article></main><div class="layout_backToHome__1vZsp"><a href="/">← Back to home</a></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"2015-02-18-package-packagist.html","contentHtml":"\u003cp\u003eวันนี้มีโอกาสอัพโหลด PHP Library ที่เขียนขึ้นมาใช้งานเองเข้า Packagist เนื่องจากต้องการโหลด Library ที่เขียนขึ้นผ่าน composer จึงมาเขียน Blog แบ่งปันประสบการณ์ครับ  \u003c/p\u003e\n\u003cp\u003eComposer กับ Packagist คืออะไรผมจะไม่กล่าวถึงแล้วนะครับ   \u003c/p\u003e\n\u003cp\u003eสิ่งที่จำเป็นสำหรับการอัพโหลด PHP Library เข้า Packagist ก็คือ  \u003c/p\u003e\n\u003col\u003e\n\u003cli\u003ecomposer.json  \u003c/li\u003e\n\u003cli\u003eCode ของเราต้องอยู่ในรูปแบบของ \u003ca href=\"http://www.php-fig.org/psr/psr-4/\"\u003ePSR-4\u003c/a\u003e  \u003c/li\u003e\n\u003cli\u003eGithub  \u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eผมจะใช้โปรเจค \u003ca href=\"https://github.com/kittinan/php-http\"\u003ehttps://github.com/kittinan/php-http\u003c/a\u003e เป็นตัวอย่างนะครับ ซึ่ง commit ก่อนที่เปลี่ยนรูปแบบให้เป็น PSR-4 นั้น จะอยู่ใน commit นี้ \u003ca href=\"https://github.com/kittinan/php-http/tree/9a91de95c53538d081081c56ee4d77b6d9fa2171\"\u003ehttps://github.com/kittinan/php-http/tree/9a91de95c53538d081081c56ee4d77b6d9fa2171\u003c/a\u003e ซึ่งจะสังเกตุเห็นว่ามีอยู่แค่ 2 ไฟล์เท่านั้นคือ  \u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ehttp.php\u003cbr\u003e\n- README.md  \u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eโดยผมจะจัดการไฟล์ใหม่ให้มันอยู่ในรูปแบบของ PSR-4 นะครับ โดยที่ผมจะจัดวางไฟล์ใหม่ดังนี้  \u003c/p\u003e\n\u003cp\u003e\\\u003cNamespaceName\u003e(\\\u003cSubNamespaceNames\u003e)*\\\u003cClassName\u003e  \u003c/p\u003e\n\u003cp\u003eซึ่งเมื่อจัดแล้วจะอยู่ในรูปแบบ  \u003c/p\u003e\n\u003cp\u003e\\KS\\HTTP\\HTTP.php  \u003c/p\u003e\n\u003cp\u003eเมื่อจัดการวางไฟล์และโฟล์เดอร์ให้อยู่ในรูปแบบ PSR-4 เรียบร้อยผมก็จัดการแก้ชื่อ class จากเดิมที่เป็น http  เป็น HTTP และใส่ namespace ที่ถูกต้องเข้าไปก็คือ namespace KS\\HTTP; ดูได้จากไฟล์นี้นะครับ \u003ca href=\"https://github.com/kittinan/php-http/blob/master/src/KS/HTTP/HTTP.php\"\u003ehttps://github.com/kittinan/php-http/blob/master/src/KS/HTTP/HTTP.php\u003c/a\u003e  \u003c/p\u003e\n\u003cp\u003eเมื่อจัดการไฟล์และโฟล์เดอร์เรียบร้อยแล้ว ก็มาถึงคิวของ composer.json ซึ่งจะต้องสร้างไฟล์นี้ไว้ที่ root path ของ project นะครับ  \u003c/p\u003e\n\u003cp\u003eสร้าง composer.json ที่ root path ของ project โดยใส่รายละเอียดตามไฟล์นี้ครับ \u003ca href=\"https://github.com/kittinan/php-http/blob/master/composer.json\"\u003ehttps://github.com/kittinan/php-http/blob/master/composer.json\u003c/a\u003e  \u003c/p\u003e\n\u003cp\u003eสิ่งสำคัญคือตรง autoload เราต้องกำหนดให้ถูกต้องครับ ซึ่งเราจะใช้ PSR-4  โดยที่ key ของ json ตรงนั้นจะเปน namespace ของเรา แล้ว  value ก็จะเป็น folder ครับซึ่งจะออกมาเป็นดังนี้  \u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\"KS\\HTTP\\\": \"src/KS/HTTP\"\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eเมื่อสร้างไฟล์ composer.json เรียบร้อย ให้ commit และ push ขึ้น github ครับ หลังจากนั้นเราก็เข้าไปที่เวป \u003ca href=\"https://packagist.org/\"\u003ehttps://packagist.org/\u003c/a\u003e ให้ login  ด้วย user Github ให้เรียบร้อยก่อนนะครับ เสร็จแล้วกด submit package เราก็นำ url github project ของเรามาใส่ รอสักครู่มันก็จะไปดึงข้อมูลจาก github มาให้ กด submit เป็นเสร้จสิ้น  \u003c/p\u003e\n\u003cp\u003eหากเราต้องการเวลาที่ push code ใหม่ๆเข้าไปยัง Github และไป update เจ้า Packagist  เราต้องสร้าง GitHub Service Hook ไปยัง  Packagist ครับ โดยกดเข้าไปที่ GitHub Service Hook ดังภาพ  \u003c/p\u003e\n\u003cp\u003e\u003ca href=\"http://4.bp.blogspot.com/-DWpwnRMbCvQ/VONzZ6fYvkI/AAAAAAAAUos/Q-c4BtYVdV4/s1600/Screenshot-20.png\"\u003e\u003cimg src=\"http://4.bp.blogspot.com/-DWpwnRMbCvQ/VONzZ6fYvkI/AAAAAAAAUos/Q-c4BtYVdV4/s1600/Screenshot-20.png\"\u003e\u003c/a\u003e\u003cbr\u003e\nเมื่อกดเข้าไปแล้วสิ่งที่เราต้องการคือ  Your API Token กดเพื่อแสดง token ครับดังภาพ  \u003c/p\u003e\n\u003cp\u003e\u003ca href=\"http://2.bp.blogspot.com/-hTXg2a_dS3Y/VON0DcDdmtI/AAAAAAAAUo0/yJxd8fV_jH8/s1600/Screenshot-21.png\"\u003e\u003cimg src=\"http://2.bp.blogspot.com/-hTXg2a_dS3Y/VON0DcDdmtI/AAAAAAAAUo0/yJxd8fV_jH8/s1600/Screenshot-21.png\"\u003e\u003c/a\u003e  \u003c/p\u003e\n\u003cp\u003eให้เรานำ API token ไปใส่ที่ Github ครับ ซึ่งเข้าไปที่ Project ของเราแล้วกด Setting ดังภาพ  \u003c/p\u003e\n\u003cp\u003e\u003ca href=\"http://4.bp.blogspot.com/-hoisQpLYZYk/VON0tPPbHBI/AAAAAAAAUpA/4BMJ_Z5TzmU/s1600/Screenshot-22.png\"\u003e\u003cimg src=\"http://4.bp.blogspot.com/-hoisQpLYZYk/VON0tPPbHBI/AAAAAAAAUpA/4BMJ_Z5TzmU/s1600/Screenshot-22.png\"\u003e\u003c/a\u003e  \u003c/p\u003e\n\u003cp\u003eเมื่อกดเข้าไปที่ Setting  แล้วให้ไปที่ Webhooks \u0026#x26; Services \u003e  กด Add Services เลือก Pakagist ครับ  \u003c/p\u003e\n\u003cp\u003eเสร็จแล้วใส่ username เราที่ใช้ใน Pakagist ถ้าในที่นี่ login Pakagist ด้วย Github\u003cbr\u003e\nusername ที่ใช้ก็จะเหมือน username ของ Github ครับ ในโปรเจคนี้คือ kittinan และใส่ token ที่เราได้จาก Pakagist ดังภาพ  \u003c/p\u003e\n\u003cp\u003e\u003ca href=\"http://3.bp.blogspot.com/-ZhSKX7keJWQ/VON13AUmZbI/AAAAAAAAUpI/_5FNUzXryDg/s1600/Screenshot-23.png\"\u003e\u003cimg src=\"http://3.bp.blogspot.com/-ZhSKX7keJWQ/VON13AUmZbI/AAAAAAAAUpI/_5FNUzXryDg/s1600/Screenshot-23.png\"\u003e\u003c/a\u003e  \u003c/p\u003e\n\u003cp\u003eกด Add Service เป็นอันเสร็จสิ้นครับ เมื่อเรา Push code ใหม่ๆเข้า Gihub เจ้า Gtihub ก็จะยิงไปบอก Pakagist ว่ามี code ใหม่ๆมาแล้วนะ เจ้า Pakgist ก็จะอัพเดทข้อมูลๆใหม่ครับ  \u003c/p\u003e\n\u003cp\u003eเดี๋ยวบทความต่อไปจะมาเล่าถึงวิธีการเชื่อต่อกับ \u003ca href=\"https://travis-ci.org/\"\u003etravis-ci\u003c/a\u003e เพื่อทำ Continuous Integration นะครับ\u003c/p\u003e\n","title":"วิธีการอัพโหลด PHP Package ขึ้น Packagist","date":"2015-02-18 00:15:00"}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"2015-02-18-package-packagist.html"},"buildId":"hTdiHLNlQlQZ-_PaVeAWX","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>